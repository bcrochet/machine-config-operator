filesystem: "root"
mode: 0755
path: "/usr/local/bin/fletcher8"
contents:
  inline: |
    #!/usr/libexec/platform-python
    import sys
    
    # Generate an 8-bit integer router ID for keepalived
    data = map(ord, sys.argv[1])
    ckA = ckB = 0
    
    for b in data:
        ckA = (ckA + b) & 0xf
        ckB = (ckB + ckA) & 0xf
    print((ckB << 4) | ckA )
    