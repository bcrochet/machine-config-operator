filesystem: "root"
mode: 0644
path: "/etc/kubernetes/static-pod-resources/coredns/Corefile.template"
contents:
  inline: |
    . {
        errors
        health
        mdns {{`{{.Cluster.Domain}}`}} 0 {{`{{.Cluster.Name}}`}}
        forward . /etc/coredns/resolv.conf
        cache 30
        reload
        hosts /etc/coredns/api-int.hosts {{`{{.Cluster.Domain}}`}} {
            {{ .Infra.Status.PlatformStatus.BareMetal.APIServerInternalIP }} api-int.{{`{{.Cluster.Domain}}`}}
            fallthrough
        }
    }
    